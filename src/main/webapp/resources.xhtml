<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://java.sun.com/jsf/facelets"
                template="./WEB-INF/templates/subjectTemplate.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <ui:define name="title">
        - Recursos de Materia
    </ui:define>

    <ui:define name="content">
        <div class="hero-unit">
            <div class="row">
                <div class="span7">
                    <h2 style="color:green">Recursos</h2>
                    <marquee bgcolor="#F5F5E5" width="52%" scrolldelay="100" scrollamount="5" direction="left" loop="infinite">
                        Aquí podrás encontrar todo el material relacionado con esta materia...
                    </marquee>
                </div>
                <div class="span0">
                    <h1><a data-toggle="modal" href="#shareModal" class="btn btn-large btn-primary">+ Compartir nuevo recurso</a></h1>
                </div>
                <div class="span11">
                     <h:form id="form">  
                        <p:growl id="messages" showDetail="true" />  
                        <p:treeTable value="#{resourceBean.root}" var="document"  
                                     selection="#{resourceBean.selectedNode}" selectionMode="single">  
                            <p:column style="width:140px">  
                                <f:facet name="header">  
                                    Título  
                                </f:facet>  
                                <h:outputText value="#{document.title}" />  
                            </p:column>  
                            <p:column style="width:140px">  
                                <f:facet name="header">  
                                    Tema  
                                </f:facet>  
                                <h:outputText value="#{document.topic}" />  
                            </p:column>  
                            <p:column style="width:70px">  
                                <f:facet name="header">  
                                    Tipo 
                                </f:facet>  
                                <h:outputText value="#{document.type}" />  
                            </p:column>  

                            <f:facet name="footer">  
                                <p:commandButton value="Detalles" icon="ui-icon-search"  
                                        update=":form:documentPanel" oncomplete="documentDialog.show()"/>  
                            </f:facet>  
                        </p:treeTable>  
                        <p:dialog header="Detalles" showEffect="fade" widgetVar="documentDialog" modal="true">  
                            <p:outputPanel id="documentPanel">  
                                <h:panelGrid  columns="2" cellpadding="5" rendered="#{not empty resourceBean.selectedNode}">  
                                    <h:outputLabel for="title" value="Título: " />  
                                    <h:outputText id="title" value="#{resourceBean.selectedNode.data.title}" style="font-weight:bold" />  

                                    <h:outputLabel for="size" value="Tema: " />  
                                    <h:outputText id="topic" value="#{resourceBean.selectedNode.data.topic}" style="font-weight:bold" />  

                                    <h:outputLabel for="type" value="Tipo: " />  
                                    <h:outputText id="type" value="#{resourceBean.selectedNode.data.type}" style="font-weight:bold" />  
                                    
                                    <h:commandButton action="#" value="VER" class="btn btn-success"/>
                                    
                                </h:panelGrid>  

                                <p:dataList value="#{documentsController.selectedNodes}"   
                                            var="selectedNode" rendered="#{not empty resourceBean.selectedNodes}">  
                                    #{selectedNode.data.name}  
                                </p:dataList>  
                            </p:outputPanel>  
                        </p:dialog>  

                    </h:form>
                </div>
            </div>
            <div class="row">
                <div class="span12">
                    <h:form id="shareForm" class="form-horizontal form-no-margin">
                        <div id="shareModal" class="modal hide fade">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal">×</button>
                                <h2>Nuevo recurso:</h2>
                            </div>
                            <div class="modal-body">
                                <div class="control-group">
                                    <label class="control-label" for="title">Título:</label>
                                    <div class="controls">
                                        <p:inputText id="title" required="true" value="#{resourseBean.title}" 
                                                     requiredMessage="Por favor completa este campo" />
                                        <p:message id="titleMessage" for="title" />
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="topic">Tema:</label>
                                    <div class="controls">
                                        <p:inputText id="topic" required="true" value="#{resourseBean.topic}" 
                                                     requiredMessage="Por favor completa este campo" />
                                        <p:message id="topicMessage" for="topic" />
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="resourse">Recurso:</label>
                                    <div class="controls">
                                        <p:fileUpload value="#{fileUploadController.file}" mode="simple"/>
                                    </div>
                                </div>
                                <div class="control-group">
                                    <label class="control-label" for="type">Tipo:</label>
                                    <div class="controls">
                                        <p:inputText id="type" required="true" value="#{resourseBean.type}" 
                                                     requiredMessage="Por favor completa este campo" />
                                        <p:message id="typeMessage" for="type" />
                                    </div>
                                </div>  
                            </div>
                            <div class="modal-footer">
                                <h:commandButton action="#" value="Compartir" class="btn btn-success"/>
                            </div>        
                        </div>
                    </h:form>
                </div>        
            </div>

        </div>
    </ui:define>

</ui:composition>
